prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0033
  type: FUNCTIONAL
  title: Autonomous Review-Fix loop (Rework Controller)
  statement: 'The system MUST provide a deterministic Rework Controller that automatically
    responds to review rejections by generating rework events, re-awarding leases,
    or opening fix-sub-work without human intervention.'
  acceptance_criteria:
  - A REVIEW.REJECTED event triggers the Rework Controller to evaluate retry budgets
    and session health.
  - If budgets allow, the system automatically emits REWORK.CREATED and continues
    execution (either with the same session or a new one).
  - The rework loop must be finite; exceeding the retry budget triggers a REWORK.RETRY_BUDGET_EXCEEDED
    event and transitions to adjudication.
  - Review rejections must be structured (e.g., ReviewOutcome YAML) to enable machine-readable
    reproduction and fix instructions.
  evidence:
    evidence_ids:
    - EVID-0004
    - EVID-0006
