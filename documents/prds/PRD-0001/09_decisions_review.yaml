prd_decisions_review:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  decisions:
  - id: DEC-0001
    statement: Use QUIC (quinn) as the default federation link transport with explicit
      stream prioritization for control vs replication vs artifacts.
    rationale: Multiplexed streams and long-lived secure links are a good fit for
      holonic federation; prioritization prevents bulk sync from starving control.
    alternatives_considered:
    - HTTP/2 gRPC for federation links (simpler RPC model but head-of-line and multiplexing
      concerns for mixed traffic).
    - libp2p stack as default (powerful but premature and security-sensitive for v0).
    evidence_ids:
    - EVID-0007
  - id: DEC-0002
    statement: Use protobuf canonical encoding for signed kernel records and protocol
      messages; forbid nondeterministic fields (maps) in signed payloads.
    rationale: Multi-language interoperability and stable signature verification require
      deterministic encoding and explicit schema versions.
    alternatives_considered:
    - Canonical CBOR (hard to guarantee cross-language canonicalization).
    - Signing JSON (serialization differences and ordering issues).
    evidence_ids:
    - EVID-0008
  - id: DEC-0003
    statement: Use SQLite (WAL) as the v0 local ledger storage and projection store,
      with append-only semantics enforced in code and integrity checks.
    rationale: SQLite provides atomic commits, indexing for projections, and operational
      simplicity while keeping the design compatible with future storage backends.
    alternatives_considered:
    - Raw JSONL append-only files (simpler conceptually but operationally painful
      and slow to query).
    - Embedded key-value store (adds complexity; still requires indexing and integrity
      tooling).
    evidence_ids:
    - EVID-0004
    - EVID-0005
  - id: DEC-0004
    statement: Kernel scope includes syscall mediation, policy enforcement, and deterministic
      lease mechanics; higher-level coordination (bidding/threads) is handled by HWP
      profiles on top of kernel events.
    rationale: Safety and correctness depend on an enforced kernel boundary; coordination
      mechanisms can evolve without changing kernel invariants.
    alternatives_considered:
    - Let agents coordinate by convention without atomic leases (leads to races and
      duplicate work).
    - Bake vendor agent APIs into the protocol (couples kernel to external providers
      and reduces longevity).
    evidence_ids:
    - EVID-0003
    - EVID-0006
  gate_reviews:
  - gate_id: GATE-PRD-ARCHITECTURE
    status: PENDING
    evidence_ids:
    - EVID-0020
    - EVID-0021
  - gate_id: GATE-PRD-PRODUCT
    status: PENDING
    evidence_ids:
    - EVID-0021
  - gate_id: GATE-PRD-RELIABILITY
    status: PENDING
    evidence_ids:
    - EVID-0006
    - EVID-0007
  - gate_id: GATE-PRD-SECURITY
    status: PENDING
    evidence_ids:
    - EVID-0013
    - EVID-0014
