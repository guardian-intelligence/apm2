prd_problem:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  context:
    background: 'Autonomous agents can generate and modify code rapidly, but at scale
      they create operational risk: uncontrolled side effects, duplicate work, non-reproducible
      outcomes, and security regressions. A durable software factory requires a kernel
      substrate that constrains probabilistic workers with deterministic boundaries,
      evidence, and governance.'
    current_state: Agent-driven workflows are typically orchestrated by ad hoc scripts,
      fragile prompts, and human intervention. Work ownership is often implicit, progress
      is narrative, and evidence is inconsistent. Multi-node operation and offline
      behavior are frequently undefined, leading to waste and drift.
    why_now: The cost/performance of local and remote inference is improving while
      the need for secure, autonomous engineering pipelines is increasing. A holonic
      substrate that can operate across heterogeneous compute and produce auditable
      evidence enables economically valuable, high-throughput software engineering
      without human bottlenecks.
  problem_statement:
    primary: 'Build APM2: an autonomous, holonic software factory that can run PRD/RFC/ticket
      creation, implementation, review, and merge end-to-end using template-bound
      specs, with default-deny tool mediation, deterministic work leases, and quorum-based
      autonomous adjudication that eliminates human-in-the-loop bottlenecks.'
    supporting_details:
    - 'Autonomy requires a closed loop: spec refinement → work decomposition → execution
      → review → merge → evidence → metrics → next work.'
    - 'Governance requires autonomous adjudication: resolve bounded choices via agent
      quorum, deterministic timeouts, and safe fallback policies.'
    - 'Safety requires a syscall boundary: agents must request side effects; policy
      is enforced and logged.'
    - 'Scale requires holonic recursion: every node can supervise workers and child
      nodes using identical interfaces; fanout is bounded to avoid N^2 explosions.'
    - 'Trust requires evidence and attribution: every requirement maps to reproducible
      evidence artifacts; policy decisions are recorded; ledgers are tamper-evident;
      holonic boundary integrity ensures only verified external states are exported.'
  non_goals:
  - id: NG-0001
    statement: Permissionless open membership and internet-scale peer discovery in
      v0; membership is explicit and fail-closed.
  - id: NG-0002
    statement: A marketplace/bidding economy in v0; direct assignment and deterministic
      leasing are sufficient for the initial factory.
  - id: NG-0003
    statement: Custom distributed consensus (Raft/Paxos) in v0; a single authority
      per holonic subtree is acceptable initially.
  - id: NG-0004
    statement: Requiring a specific vendor agent API or LLM framework; adapters and
      inference providers are pluggable.
  - id: NG-0005
    statement: Storing large blobs (logs, artifacts) inside the ledger; the ledger
      stores references and hashes only.
