prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0025
  type: TESTABILITY
  title: Deterministic simulation and property testing
  statement: The system MUST provide a deterministic simulation harness to test partitions,
    duplicates, crash loops, and timing edge cases; reducers and policy evaluation
    MUST be property tested.
  acceptance_criteria:
  - Simulation can inject link drops, message duplication, reordering, and node restarts
    deterministically.
  - Reducer logic is property tested for idempotency, monotonic sequence handling,
    and conflict detection.
  - Policy engine is tested for determinism and deny-by-default behavior across randomized
    tool requests.
  - Simulation outputs are captured as artifacts with reproducible commands.
  - CI executes the simulation suite and blocks merges on failure.
  evidence:
    evidence_ids:
    - EVID-0005
    - EVID-0006
