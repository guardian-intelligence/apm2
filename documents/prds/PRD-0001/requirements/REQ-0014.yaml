prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0014
  type: FUNCTIONAL
  title: Inference provider abstraction
  statement: Inference MUST be abstracted behind a provider interface that supports
    local inference, delegated inference (another node), and remote inference, without
    changing agent logic; inference usage MUST be budgeted and logged as tool calls.
  acceptance_criteria:
  - Agents invoke infer via the syscall boundary and cannot call providers directly.
  - Provider selection is policy-driven per profile and can be switched without changing
    work logic.
  - Inference requests and responses are logged with redaction policy and content
    hashes/pointers where appropriate.
  - Inference budgets (tokens/requests) are enforced; overages fail closed with explicit
    reason codes.
  - A local inference mode can execute with DISALLOWED network access.
  evidence:
    evidence_ids:
    - EVID-0009
    - EVID-0018
