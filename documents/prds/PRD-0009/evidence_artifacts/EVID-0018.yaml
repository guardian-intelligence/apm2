prd_evidence_artifact:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "EVID-0018"
  category: "TEST_RESULTS"
  title: "Typed GateReceipt Payload Validation Tests"
  description: |
    Tests verifying GateReceipt typed payload validation, including required AAT
    fields and signature coverage for gate_id=aat.
  source_acceptance_test: FAC-AT-0018
  capture:
    paths:
      - "test/fac/gate_receipt_typed_payload/"
  verification:
    commands:
      - id: "CMD-0001"
        shell: "bash"
        command: "cargo test --workspace -- gate_receipt::typed_payload"
        expected_exit_code: 0
        cwd: "."
        timeout_seconds: 120
        network_access: "DISALLOWED"
        allowlist_hosts: []
        constraints:
          - "GateReceipt payload fixtures include AAT variant"
  assertions:
    - "AAT payload requires view_commitment_hash, rcp_manifest_hash, rcp_profile_id, policy_hash, and determinism_class"
    - "AAT payload requires run_receipt_hashes, run_count, stability_digest, verdict"
    - "AAT payload requires terminal_evidence_digest, observational_evidence_digest, and terminal_verifier_outputs_digest"
    - "AAT payload references artifact_manifest_hash stored in CAS"
    - "Signature covers payload_hash and EvidenceBundle hash"
  data:
    classification: "INTERNAL"
    redaction:
      required: false
      guidance: []
