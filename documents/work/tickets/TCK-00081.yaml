ticket_meta:
  schema_version: "2026-01-25"
  template_version: "2026-01-25"
  ticket:
    id: "TCK-00081"
    title: "Document sccache setup in CONTRIBUTING.md"
  binds:
    prd_id: "NONE"
    rfc_id: "RFC-0007"
    requirements:
      - requirement_id: "PERF-002"
        requirement_ref: "documents/rfcs/RFC-0007/01_problem_and_imports.yaml#rfc_local_requirements.requirements[1]"
    evidence_artifacts:
      - "EVID-7002"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
    responsibility_domains:
      - "DOMAIN_DEVELOPER_EXPERIENCE"
  dependencies:
    tickets:
      - "TCK-00080"
  scope:
    in_scope:
      - "Add Build Optimization section to CONTRIBUTING.md"
      - "Document sccache installation: cargo install sccache"
      - "Document sccache configuration: export RUSTC_WRAPPER=sccache"
      - "Document verification: sccache --show-stats"
      - "Explain benefits for multi-worktree development"
      - "Explain how sccache avoids CARGO_TARGET_DIR locking issues"
    out_of_scope:
      - "Remote sccache configuration (S3, Redis, etc.)"
      - "CI sccache setup"
      - "sccache troubleshooting guide"
  plan:
    steps:
      - "Read current CONTRIBUTING.md structure"
      - "Identify appropriate location for Build Optimization section"
      - "Add '## Build Optimization' section header"
      - "Add '### Shared Compilation Cache (sccache)' subsection"
      - "Document what sccache is and why it helps with worktrees"
      - "Document installation: cargo install sccache"
      - "Document shell configuration: export RUSTC_WRAPPER=sccache"
      - "Document verification command: sccache --show-stats"
      - "Explain cache location (~/.cache/sccache)"
      - "Explain benefit: parallel builds in multiple worktrees"
      - "Verify CONTRIBUTING.md renders correctly"
      - "Verify sccache documentation is accurate"
  definition_of_done:
    evidence_ids:
      - "EVID-7002"
    criteria:
      - "CONTRIBUTING.md has Build Optimization section"
      - "sccache subsection exists"
      - "Installation command is documented: cargo install sccache"
      - "Configuration is documented: export RUSTC_WRAPPER=sccache"
      - "Verification command is documented: sccache --show-stats"
      - "Benefits for multi-worktree development are explained"
      - "Documentation is copy-pasteable"
  notes:
    security: |
      sccache stores compiled artifacts locally by default. No credentials or
      sensitive data is cached. The cache contains only compiled object files
      derived from source code already in the repository.
    implementation_details: |
      Documentation content to add:

      ```markdown
      ## Build Optimization

      The project uses worktree-based development, which can lead to redundant
      compilation across worktrees. These optimizations help reduce build times.

      ### Shared Compilation Cache (sccache)

      [sccache](https://github.com/mozilla/sccache) caches compiled artifacts
      and shares them across different Cargo target directories. This is
      particularly useful for worktree-based development where each worktree
      has its own `target/` directory.

      **Installation:**
      ```bash
      cargo install sccache
      ```

      **Configuration:** Add to your shell profile (`~/.bashrc` or `~/.zshrc`):
      ```bash
      export RUSTC_WRAPPER=sccache
      ```

      **Verification:**
      ```bash
      sccache --show-stats
      ```

      **Benefits:**
      - Compilation artifacts shared across all worktrees
      - No file locking conflicts (unlike shared CARGO_TARGET_DIR)
      - Automatic cache management
      - Cache stored at `~/.cache/sccache`

      **Troubleshooting:**
      If you experience cache-related issues, clear the cache:
      ```bash
      rm -rf ~/.cache/sccache
      ```
      ```
    affected_files: |
      Modified: CONTRIBUTING.md (add sccache documentation)
