ticket_meta:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"
  ticket:
    id: "TCK-00329"
    title: "Adapter profiles for claude-code, gemini-cli, codex-cli, local-inference"
  binds:
    prd_id: "PRD-0009"
    rfc_id: "RFC-0019"
    requirements:
      - requirement_id: "REQ-0009"
        requirement_ref: "documents/rfcs/RFC-0019/requirements/REQ-0009.yaml#requirement"
    evidence_artifacts:
      - evidence_id: "EVID-0009"
        artifact_ref: "documents/rfcs/RFC-0019/evidence_artifacts/EVID-0009.yaml#evidence_artifact"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
    responsibility_domains:
      - "DOMAIN_DAEMON"
  dependencies:
    tickets:
      - ticket_id: "TCK-00328"
        reason: "Profiles must be schema-defined and hash-selectable before provisioning concrete profiles"
  scope:
    in_scope:
      - "Provide AgentAdapterProfileV1 artifacts for claude-code, gemini-cli, codex-cli, and local-inference"
      - "Default to black_box ledger-mediated driver where possible (ToolIntent grammar + kernel mediation)"
      - "Define permission_mode_map and capability_map per profile"
      - "Define version_probe and health_checks per profile (fail closed on drift/misconfiguration)"
    out_of_scope:
      - "Automated installation/configuration of vendor CLIs"
      - "Interactive/TTY-only workflows (profiles must support non-interactive execution for conformance)"
  plan:
    steps:
      - "For each target CLI, define command/args/env templates and input/output modes"
      - "Define minimal ToolIntent grammar and tool_bridge mode per profile (prefer black_box)"
      - "Define permission_mode_map and capability_map to kernel tool classes"
      - "Add version_probe and health_checks (timeouts/stall thresholds) and set conservative defaults"
      - "Store profiles in CAS and record the resulting hashes for selection"
  definition_of_done:
    evidence_ids:
      - "EVID-0009"
    criteria:
      - "Profiles exist for all target CLIs and are hash-addressed."
      - "Each profile can run a non-interactive episode under kernel tool mediation."
  notes:
    security: "Disable or restrict native CLI tools; kernel mediation must remain authoritative."
    verification: "Profiles must fail closed on parse errors, timeouts, or unexpected output modes."
    general: "Profiles are the bridge from RFC spec to runnable automation across heterogeneous agent runtimes."

