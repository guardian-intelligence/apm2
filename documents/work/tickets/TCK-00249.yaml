ticket_meta:
  schema_version: '2026-01-26'
  template_version: '2026-01-26'
  ticket:
    id: TCK-00249
    title: Implement dual-socket topology for privilege separation
    status: READY
  binds:
    rfc_id: RFC-0017
    requirements:
    - requirement_id: REQ-DCP-0001
    - requirement_id: REQ-DCP-0008
acceptance_criteria:
- criterion: Two sockets created with correct permissions
  verification: stat shows 0600 for operator, 0660 for session
- criterion: Connections routed based on socket path
  verification: Integration test connects to each socket, verifies routing
- criterion: Session socket not in privileged handler namespace
  verification: Attempt to call ClaimWork from session socket fails
implementation:
  code_examples: []
  files_to_create:
  - path: crates/apm2-daemon/src/protocol/socket_manager.rs
    purpose: Manage dual-socket lifecycle and routing
  files_to_modify:
  - changes: 'Create two listener sockets: operator.sock and session.sock.

      Route connections based on socket path.

      '
    path: crates/apm2-daemon/src/protocol/server.rs
  - changes: 'Configure socket paths from config.

      Set permissions: operator.sock (0600), session.sock (0660).

      '
    path: crates/apm2-daemon/src/main.rs
  implementation_steps: []
  summary: ''
notes: 'Phase: PHASE-1

  Generated from RFC RFC-0017 ticket decomposition on 2026-01-30.'
test_requirements:
- description: Unit tests pass
  test_id: UT-00249-01
  verification_command: cargo test -p apm2-core tck_00249
- description: Integration test
  test_id: IT-00249-01
  verification_command: cargo run --bin apm2 -- factory tickets emit --rfc RFC-0017
