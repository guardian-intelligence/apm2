rfc_ticket_decomposition:
  schema_version: "2026-01-25"
  template_version: "2026-01-25"
  principles:
  - "Tickets are atomic and independently verifiable"
  - "Each ticket references requirement_ids and evidence_ids"
  - "Cross-ticket dependencies are explicit and minimal"
  - "Tickets are ordered to enable incremental progress"
  - "Configuration must be complete before documentation references it"

  decomposition_strategy: "Sequential implementation - configuration before documentation"

  ticket_plan:
    ticket_storage_root: "documents/work/tickets/"
    tickets:
    # =================================================================
    # PHASE 0: Configuration
    # =================================================================
    - ticket_id: TCK-00080
      title: "Configure mold linker in .cargo/config.toml"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00080.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00080.md"
      scope:
        in_scope:
        - "Add [target.x86_64-unknown-linux-gnu] section to .cargo/config.toml"
        - "Set linker = \"clang\""
        - "Set rustflags to use mold via -fuse-ld=mold"
        - "Add comment explaining the configuration"
        out_of_scope:
        - "macOS mold configuration"
        - "Windows linker configuration"
        - "CI workflow changes"
      binds:
        requirement_ids:
        - PERF-001
        evidence_ids:
        - EVID-7001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_BUILD_RELEASE
      dependencies: []
      definition_of_done:
        criteria:
        - ".cargo/config.toml contains mold configuration"
        - "cargo build -vv shows mold being used"
        - "Existing builds continue to work"
        - "Developers on non-Linux platforms unaffected"
        evidence_ids:
        - EVID-7001

    # =================================================================
    # PHASE 1: Documentation
    # =================================================================
    - ticket_id: TCK-00081
      title: "Document sccache setup in CONTRIBUTING.md"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00081.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00081.md"
      scope:
        in_scope:
        - "Add sccache section to CONTRIBUTING.md"
        - "Document installation: cargo install sccache"
        - "Document configuration: export RUSTC_WRAPPER=sccache"
        - "Document verification: sccache --show-stats"
        - "Explain benefits for worktree-based development"
        out_of_scope:
        - "Remote sccache configuration"
        - "CI sccache setup"
      binds:
        requirement_ids:
        - PERF-002
        evidence_ids:
        - EVID-7002
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_DEVELOPER_EXPERIENCE
      dependencies:
      - TCK-00080
      definition_of_done:
        criteria:
        - "CONTRIBUTING.md documents sccache setup"
        - "Installation instructions are complete"
        - "Configuration example is copy-pasteable"
        - "Benefits are clearly explained"
        evidence_ids:
        - EVID-7002

    - ticket_id: TCK-00082
      title: "Document cargo-nextest in CONTRIBUTING.md"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00082.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00082.md"
      scope:
        in_scope:
        - "Add cargo-nextest section to CONTRIBUTING.md"
        - "Document installation: cargo install cargo-nextest"
        - "Document usage: cargo nextest run"
        - "Explain performance benefits vs cargo test"
        out_of_scope:
        - "Mandating nextest in CI"
        - "Custom nextest configuration"
      binds:
        requirement_ids:
        - PERF-003
        evidence_ids:
        - EVID-7003
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_DEVELOPER_EXPERIENCE
      dependencies:
      - TCK-00080
      definition_of_done:
        criteria:
        - "CONTRIBUTING.md documents cargo-nextest"
        - "Installation instructions are complete"
        - "Usage example is provided"
        - "Performance benefits explained"
        evidence_ids:
        - EVID-7003

    - ticket_id: TCK-00083
      title: "Document local vs CI build settings"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00083.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00083.md"
      scope:
        in_scope:
        - "Add section explaining CI vs local settings to CONTRIBUTING.md"
        - "Explain CARGO_INCREMENTAL=0 in CI (reproducibility)"
        - "Recommend CARGO_INCREMENTAL=1 locally (speed)"
        - "Provide complete shell profile snippet"
        - "Include warning about not copying CI settings blindly"
        out_of_scope:
        - "Modifying CI workflow"
        - "Creating setup scripts"
      binds:
        requirement_ids:
        - PERF-004
        - PERF-005
        evidence_ids:
        - EVID-7004
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_DEVELOPER_EXPERIENCE
      dependencies:
      - TCK-00080
      definition_of_done:
        criteria:
        - "CONTRIBUTING.md explains CI vs local settings"
        - "Shell profile snippet is provided"
        - "Warning about CI settings is clear"
        - "Rationale for different settings is explained"
        evidence_ids:
        - EVID-7004

    # =================================================================
    # PHASE 2: CI Enhancement
    # =================================================================
    - ticket_id: TCK-00084
      title: "Add release build job to CI workflow"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00084.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00084.md"
      scope:
        in_scope:
        - "Add new 'Release Build' job to .github/workflows/ci.yml"
        - "Use ubuntu-24.04 runner for consistency"
        - "Install protobuf-compiler for protoc dependency"
        - "Run cargo build --workspace --release"
        out_of_scope:
        - "Modifying existing CI jobs"
        - "Adding release build artifacts to releases"
        - "Cross-compilation targets"
      binds:
        requirement_ids:
        - PERF-006
        evidence_ids:
        - EVID-7005
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_BUILD_RELEASE
      dependencies: []
      definition_of_done:
        criteria:
        - "CI workflow contains 'Release Build' job"
        - "Job runs cargo build --workspace --release"
        - "Release build passes on PR CI"
        evidence_ids:
        - EVID-7005

  dependency_graph: |
    Phase 0 (Configuration):
    +-------------+
    |  TCK-00080  |  Configure mold linker
    | config.toml |
    +------+------+
           |
           v (dependency)
    Phase 1 (Documentation):
    +-------------+-------------+-------------+
    |  TCK-00081  |  TCK-00082  |  TCK-00083  |
    |  sccache    |  nextest    |  CI vs local|
    |  docs       |  docs       |  settings   |
    +-------------+-------------+-------------+

    Phase 2 (CI Enhancement):
    +-------------+
    |  TCK-00084  |  Release build CI job
    |  ci.yml     |
    +-------------+

    Phase 1 tickets can run in parallel after TCK-00080 completes.
    They all modify CONTRIBUTING.md but in separate sections.
    Phase 2 (TCK-00084) is independent and can run in parallel with all other phases.

  requirement_coverage:
    notes: |
      All RFC-0007 requirements are covered by tickets:
      - PERF-001: TCK-00080 (mold linker configuration)
      - PERF-002: TCK-00081 (sccache documentation)
      - PERF-003: TCK-00082 (nextest documentation)
      - PERF-004: TCK-00083 (CI vs local settings)
      - PERF-005: TCK-00083 (shell profile snippet)
      - PERF-006: TCK-00084 (release build CI job)
    uncovered_requirements: []

  notes: |
    All tickets are configuration and documentation changes. No Rust code
    is modified.

    TCK-00080 should be implemented first as it provides the concrete
    configuration that the documentation references.

    Phase 1 tickets can be implemented in parallel as they modify different
    sections of CONTRIBUTING.md, or sequentially if coordination is easier.

    Verification after all tickets:
    1. cargo build -vv | grep mold  # Verify mold linker
    2. Read CONTRIBUTING.md build optimization section
    3. Follow sccache setup instructions
    4. Run cargo nextest run
    5. Verify shell snippet works
