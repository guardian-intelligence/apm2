rfc_governance_and_gates:
  schema_version: "2026-01-25"
  template_version: "2026-01-25"

  approval_requirements:
    - authority: AUTH_ARCHITECTURE
      required: true
      rationale: "Introduces new event-driven architecture for agent handoff"

    - authority: AUTH_SECURITY
      required: true
      rationale: "Webhook authentication, anti-gaming controls, trust boundaries"

  gate_reviews:
    - gate: DESIGN_REVIEW
      status: PENDING
      reviewer: ""
      date: ""
      notes: |
        Review design decisions for:
        - Event-driven vs polling architecture
        - Webhook signature validation approach
        - Ledger event schema design
        - Task queue phase model
        - Agent exit protocol
        - Anti-gaming controls

    - gate: SECURITY_REVIEW
      status: PENDING
      reviewer: ""
      date: ""
      notes: |
        Review security aspects of:
        - HMAC-SHA256 signature validation implementation
        - Webhook secret management
        - Anti-gaming controls completeness
        - Trust boundary enforcement
        - Potential bypass vectors

    - gate: IMPLEMENTATION_REVIEW
      status: PENDING
      reviewer: ""
      date: ""
      notes: "Code review of each ticket PR"

    - gate: VERIFICATION
      status: PENDING
      reviewer: ""
      date: ""
      notes: |
        Verify all acceptance criteria met:
        - Webhook endpoint functional
        - Signature validation correct
        - Events emitted to ledger
        - Task queue transitions work
        - Agent exit protocol implemented
        - Integration tests pass
        - No polling in agent transcripts

  compliance_checklist:
    - item: "Webhook endpoint accepts valid GitHub webhooks"
      status: PENDING
      ticket: "TCK-00085"

    - item: "Invalid webhook signatures rejected with 401"
      status: PENDING
      ticket: "TCK-00085"

    - item: "CIWorkflowCompleted events emitted to ledger"
      status: PENDING
      ticket: "TCK-00086"

    - item: "Duplicate webhooks handled idempotently"
      status: PENDING
      ticket: "TCK-00086"

    - item: "Work items transition correctly on CI completion"
      status: PENDING
      ticket: "TCK-00087"

    - item: "Agents cannot claim CI_PENDING work"
      status: PENDING
      ticket: "TCK-00087"

    - item: "Agent exit signal schema defined and documented"
      status: PENDING
      ticket: "TCK-00088"

    - item: "AgentSessionCompleted events emitted on exit"
      status: PENDING
      ticket: "TCK-00088"

    - item: "End-to-end handoff flow verified"
      status: PENDING
      ticket: "TCK-00089"

    - item: "Anti-gaming controls verified"
      status: PENDING
      ticket: "TCK-00089"

    - item: "No new security vulnerabilities introduced"
      status: PENDING
      notes: "Verify via security review gate"

    - item: "Feature flags enable per-phase rollback"
      status: PENDING
      notes: "Verify each phase can be disabled independently"

  sign_off_record:
    - role: "RFC Author"
      name: ""
      date: ""
      status: PENDING

    - role: "Architecture Authority"
      name: ""
      date: ""
      status: PENDING

    - role: "Security Reviewer"
      name: ""
      date: ""
      status: PENDING
