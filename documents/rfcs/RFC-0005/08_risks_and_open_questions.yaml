rfc_risks_and_open_questions:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"

  risks:
    - id: RISK-001
      description: "gh CLI version incompatibility"
      likelihood: LOW
      impact: MEDIUM
      mitigation: |
        Test with multiple gh CLI versions. The JSON output format is stable
        across recent versions. Document minimum gh version requirement.

    - id: RISK-002
      description: "Codex CLI API changes"
      likelihood: MEDIUM
      impact: LOW
      mitigation: |
        The `codex review --base` syntax is the current documented API.
        If it changes, the error message will be clear about the issue.
        Update when Codex releases new versions.

    - id: RISK-003
      description: "Pre-commit checks slow down development"
      likelihood: MEDIUM
      impact: LOW
      mitigation: |
        Provide --skip-checks flag for quick iteration. Document that
        skipping checks may result in CI failures. Consider --quick flag
        that only runs fmt check.

    - id: RISK-004
      description: "cargo-semver-checks not installed"
      likelihood: HIGH
      impact: LOW
      mitigation: |
        Make semver-checks optional with a warning. Document installation
        instructions. Consider adding to project setup instructions.

  open_questions:
    - id: OQ-001
      question: "Should we add integration tests for xtask commands?"
      status: DEFERRED
      notes: |
        Integration tests would require mocking GitHub API. Currently relying
        on manual verification. Consider adding later if bugs recur.

    - id: OQ-002
      question: "Are there other gh api calls with the same argument issue?"
      status: RESOLVED
      investigation_findings: |
        Grep search for "gh api" in xtask found 11 occurrences:

        PROBLEMATIC (inline multi-word strings):
        - push.rs:370 - "-f description=Waiting for security review" (BUG!)
        - push.rs:382 - "-f description=Waiting for code quality review" (BUG!)

        SAFE (using interpolated variables):
        - aat.rs:182 - Uses {description} variable
        - aat.rs:189 - Uses {description} variable
        - review.rs:390 - Uses {description} variable
        - security_review_exec.rs:381 - Uses {description} variable

        NOT API CALLS (println! examples or GET requests):
        - review.rs:274, 302 - println! showing example commands
        - review.rs:363 - GET request with --jq
        - security_review_exec.rs:341, 356 - GET requests with --jq

        CONCLUSION: Only push.rs has the bug. Other files correctly use
        interpolated variables which xshell handles safely.
      notes: |
        TCK-00056 only needs to fix push.rs:370 and push.rs:382.
        No other files require changes for this issue.

    - id: OQ-003
      question: "Should --skip-checks have granular options?"
      status: DEFERRED
      notes: |
        Could offer --skip-fmt, --skip-clippy, --skip-semver individually.
        Start with single --skip-checks flag; add granularity if requested.

  decisions_needed:
    - id: DN-001
      question: "Default behavior for missing semver-checks?"
      options:
        - "Warn and continue (chosen)"
        - "Error and fail"
        - "Silently skip"
      chosen: "Warn and continue"
      rationale: |
        Not all developers will have cargo-semver-checks installed. A warning
        educates while not blocking commits. The CI will catch semver issues
        regardless.
