rfc_risks_and_open_questions:
  schema_version: "2026-01-26"
  template_version: "2026-01-26"

  risks:
    - risk_id: RISK-001
      title: "LLM output variability undermines determinism"
      description: |
        Even with structured prompts, LLM outputs may vary between runs,
        especially for free-text fields like rationale and description.
      likelihood: HIGH
      impact: MEDIUM
      mitigation:
        - "Classify diff types: structural changes require acceptance, free-text is advisory"
        - "Use temperature=0 where supported by provider"
        - "Bound free-text field sizes to limit variance"
      residual_risk: MEDIUM
      owner: AUTH_ARCHITECTURE

    - risk_id: RISK-002
      title: "CCP generation performance on large repositories"
      description: |
        cargo metadata and AGENTS.md parsing may be slow on repositories
        with many crates or large AGENTS.md files.
      likelihood: MEDIUM
      impact: LOW
      mitigation:
        - "Implement incremental CCP rebuild using content hashes"
        - "Cache sub-artifacts and skip unchanged"
        - "Add --cache-dir flag for explicit cache management"
      residual_risk: LOW
      owner: AUTH_ARCHITECTURE

    - risk_id: RISK-003
      title: "Cousin abstraction detector false positives"
      description: |
        Heuristic-based cousin detection may flag legitimate new abstractions
        as duplicates, creating friction for developers.
      likelihood: HIGH
      impact: LOW
      mitigation:
        - "Start with advisory warnings (LINT-0014 is warning-first)"
        - "Provide explicit override mechanism in RFC"
        - "Track false positive rate and tune heuristics"
      residual_risk: LOW
      owner: AUTH_ARCHITECTURE

    - risk_id: RISK-004
      title: "Routing profile management complexity"
      description: |
        Multiple routing profiles for different environments (local, CI, prod)
        may create confusion and configuration drift.
      likelihood: MEDIUM
      impact: MEDIUM
      mitigation:
        - "Provide sensible defaults (local profile ships with codebase)"
        - "Document profile selection clearly"
        - "Validate profile schema on load"
      residual_risk: LOW
      owner: AUTH_PRODUCT

    - risk_id: RISK-005
      title: "Ticket ID collision during parallel emission"
      description: |
        Multiple concurrent compile runs may generate conflicting ticket IDs.
      likelihood: LOW
      impact: HIGH
      mitigation:
        - "Ticket IDs include run_id or timestamp component"
        - "Use atomic file creation to detect collisions"
        - "Fail closed on collision rather than overwrite"
      residual_risk: LOW
      owner: AUTH_ARCHITECTURE

  open_questions:
    - question_id: OQ-001
      question: "How should canary comparison handle free-text differences?"
      context: |
        When canary mode compares two model outputs, free-text fields will
        almost always differ. Should the comparison focus only on structural
        fields, or should it surface free-text differences for human review?
      proposed_answer: |
        Surface structural differences as failures requiring acceptance.
        Surface free-text differences as advisory findings for human review.
      status: PROPOSED
      owner: AUTH_ARCHITECTURE

    - question_id: OQ-002
      question: "Should Refactor Radar generate tickets automatically or require approval?"
      context: |
        REQ-0011 specifies that Radar emits maintenance tickets, but automatic
        ticket creation may generate noise without human oversight.
      proposed_answer: |
        Radar emits a bounded recommendation list to evidence/. Promotion to
        documents/work/tickets/ requires explicit approval step.
      status: PROPOSED
      owner: AUTH_PRODUCT

    - question_id: OQ-003
      question: "How should the compiler handle PRDs without existing CCP?"
      context: |
        New PRDs won't have pre-existing CCP. Should the compiler auto-generate
        CCP or require a separate ccp build step first?
      proposed_answer: |
        The compile command auto-generates CCP if missing (or outdated).
        Users can also run ccp build explicitly for more control.
      status: PROPOSED
      owner: AUTH_ARCHITECTURE

    - question_id: OQ-004
      question: "What is the migration path from RFC-0009 tickets to RFC-0010 tickets?"
      context: |
        RFC-0009 defined tickets TCK-00090 through TCK-00102. RFC-0010 defines
        TCK-00110 through TCK-00122. Should old tickets be superseded or merged?
      proposed_answer: |
        RFC-0009 tickets are superseded and should be marked as such.
        Any in-progress work should be migrated to RFC-0010 ticket equivalents.
      status: PROPOSED
      owner: AUTH_PRODUCT

  deferred_items:
    - item_id: DEFER-001
      title: "Signed manifests with daemon-issued keys"
      reason: |
        PRD-0005 Option B (daemon-resident compiler) was not selected.
        Daemon-issued signing keys are deferred to Phase 2 when daemon
        integration is implemented.
      prd_ref: "documents/prds/PRD-0005/04_solution_overview.yaml#prd_solution_overview.mvp_contract.deferred_to_phase_2"

    - item_id: DEFER-002
      title: "Material-diff acceptance workflow"
      reason: |
        MVP supports diff reporting but not interactive acceptance workflow.
        Deferred to Phase 2.
      prd_ref: "documents/prds/PRD-0005/04_solution_overview.yaml#prd_solution_overview.mvp_contract.deferred_to_phase_2"

    - item_id: DEFER-003
      title: "Dual-route canary execution"
      reason: |
        Canary mode is implemented but dual-route execution (running two
        providers simultaneously) is deferred to Phase 2.
      prd_ref: "documents/prds/PRD-0005/04_solution_overview.yaml#prd_solution_overview.mvp_contract.deferred_to_phase_2"
