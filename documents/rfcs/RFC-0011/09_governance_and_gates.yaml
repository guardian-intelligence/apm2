rfc_governance_and_gates:
  schema_version: "2026-01-27"
  template_version: "2026-01-27"
  rfc_id: RFC-0011

  governance_overview: |
    RFC-0011 requires signoff from AUTH_PRODUCT, AUTH_SECURITY, and AUTH_ARCHITECTURE
    due to its scope across the kernel, compiler, policy, and security domains.
    Gate reviews follow the standard RFC council process.

  required_signoffs:
    - authority: AUTH_PRODUCT
      rationale: CAC fundamentally changes how context is authored and consumed
      signoff_scope: PRD requirements coverage, rollout strategy, success metrics

    - authority: AUTH_SECURITY
      rationale: CAC introduces new trust boundaries and security properties
      signoff_scope: Trust model, threat scenarios, emergency recovery procedures

    - authority: AUTH_ARCHITECTURE
      rationale: CAC is a cross-cutting architectural change
      signoff_scope: Component design, integration points, versioning strategy

  gate_configuration:
    review_depth: COUNCIL
    council_rationale: |
      RFC-0011 is a major architectural RFC (v0 Discovery) with 15 requirements,
      6 phases, and cross-crate changes. COUNCIL depth is mandatory per
      rfc-council-workflow.md SELECT_DEPTH rules.

    gates:
      - gate_id: GATE-TCK-SCHEMA
        type: TRUSTED
        purpose: Validate RFC YAML structure
        applicability: All RFC versions
        pass_criteria: RFC files parse as valid YAML matching RFC schema

      - gate_id: GATE-TCK-DEPENDENCY-ACYCLICITY
        type: DETERMINISTIC
        purpose: Ensure no circular dependencies in ticket decomposition
        applicability: v2+ (after ticket decomposition)
        pass_criteria: Ticket dependency graph is a DAG

      - gate_id: GATE-TCK-SCOPE-COVERAGE
        type: DETERMINISTIC
        purpose: Verify all PRD requirements are addressed
        applicability: All versions
        pass_criteria: |
          All 15 requirements (CAC-REQ-0001 through CAC-REQ-0015) are
          mapped to design decisions or tickets

      - gate_id: GATE-TCK-CCP-MAPPING
        type: DETERMINISTIC
        purpose: Verify referenced files exist in CCP index
        applicability: v2+ (after codebase exploration)
        pass_criteria: All files_to_modify references exist in CCP

      - gate_id: GATE-TCK-ATOMICITY
        type: LLM_ASSISTED
        purpose: Verify tickets are single-PR completable
        applicability: v4 (before ticket generation)
        pass_criteria: |
          Each ticket can be implemented and tested in isolation.
          Estimated complexity is achievable in one PR.

      - gate_id: GATE-TCK-IMPLEMENTABILITY
        type: LLM_ASSISTED
        purpose: Verify agent can implement ticket without clarification
        applicability: v4 (before ticket generation)
        pass_criteria: |
          Ticket contains sufficient context for implementation.
          No blocking open questions.

      - gate_id: GATE-TCK-SECURITY-AND-INTEGRITY
        type: LLM_ASSISTED
        purpose: Verify security properties are maintained
        applicability: v2+ (after trust boundary definition)
        pass_criteria: |
          All trust boundaries documented.
          All threats have mitigations.
          Emergency recovery procedures complete.

      - gate_id: GATE-TCK-REQUIREMENT-FIDELITY
        type: LLM_ASSISTED
        purpose: Verify design decisions address requirements
        applicability: v2+ (after design decisions)
        pass_criteria: |
          Each requirement has corresponding design decision.
          Acceptance criteria are testable.

      - gate_id: GATE-TCK-ANTI-COUSIN
        type: LLM_ASSISTED
        purpose: Verify no cousin abstractions introduced
        applicability: v4 (before ticket generation)
        pass_criteria: |
          Design extends existing patterns in codebase.
          No parallel abstractions for same concept.
          Component mapping grounded in CCP evidence.

  version_transitions:
    current_version: v0
    next_version: v2
    transition_criteria:
      - All Known Unknowns in 08_risks_and_open_questions.yaml investigated
      - Design decisions grounded in codebase evidence
      - Component mapping confidence elevated from LOW to MEDIUM+
      - GATE-TCK-SCHEMA passing
      - GATE-TCK-SCOPE-COVERAGE passing

    v2_to_v4_criteria:
      - All open questions resolved or explicitly deferred
      - GATE-TCK-CCP-MAPPING passing
      - GATE-TCK-SECURITY-AND-INTEGRITY passing
      - GATE-TCK-REQUIREMENT-FIDELITY passing
      - Component mapping confidence at HIGH

    v4_to_tickets_criteria:
      - All gates passing
      - GATE-TCK-ATOMICITY passing
      - GATE-TCK-IMPLEMENTABILITY passing
      - GATE-TCK-ANTI-COUSIN passing
      - No BLOCKER or MAJOR findings

  council_session_config:
    subagent_roles:
      SA-1:
        v0_focus: PRD requirement mapping, structural fidelity
        primary_artifact: Explanatory Scoring Table
      SA-2:
        v0_focus: Risk identification, knowledge gaps, feasibility
        primary_artifact: Mock Implementation Run Report
      SA-3:
        v0_focus: Trust boundary discovery, security unknowns
        primary_artifact: CAE Tree (Claim-Argument-Evidence)

    mode_selection: STOCHASTIC
    mode_selection_seed: RFC-0011-v0-20260127
    category_minimum: 2

    timeout_ms: 3600000
    token_budget: 150000
    max_cycles: 3

  evidence_bundle_location: evidence/rfc/RFC-0011/reviews/

  approval_history: []
