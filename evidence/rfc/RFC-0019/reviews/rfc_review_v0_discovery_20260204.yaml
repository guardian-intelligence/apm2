schema_version: "1.0.0"
rfc_id: RFC-0019
review_timestamp: "2026-02-04T11:00:00Z"
review_depth: COUNCIL
review_phase: v0_DISCOVERY

council_metadata:
  session_id: COUNCIL-RFC-0019-20260204-110000
  subagents:
    - agent_id: SA-1
      role: "Structural Rigorist"
      lifecycle_focus: "Structural mapping and PRD fidelity"
      anchor_modes: [70, 44]
      random_modes: [13, 62, 21]
    - agent_id: SA-2
      role: "Implementation Feasibility"
      lifecycle_focus: "Risk identification and knowledge gaps"
      anchor_modes: [40, 51]
      random_modes: [33, 75, 63]
    - agent_id: SA-3
      role: "Security Guardian"
      lifecycle_focus: "Trust boundary discovery"
      anchor_modes: [79, 36]
      random_modes: [49, 65, 18]
  cycles_completed: 1
  mode_selection_validation:
    total_modes: 15
    total_overlap: 0
    validation_passed: true

gates:
  - gate_id: GATE-TCK-SCHEMA
    status: PASSED
    executed_by: SA-1
    evidence:
      files_validated: 11
      schema_compliance: true

  - gate_id: GATE-TCK-SCOPE-COVERAGE
    status: FAILED
    executed_by: SA-1
    evidence:
      prd_workstreams_total: 9
      rfc_workstreams_covered: 7
      rfc_workstreams_missing: 2
      missing_workstreams:
        - id: H
          title: "ViewCommitment + ContextPack binding"
        - id: I
          title: "Agent Adapter Profiles"

findings:
  blockers:
    - finding_id: FND-SA1-CYCLE1-001
      source_agent: SA-1
      source_cycle: 1
      source_mode: 44
      agreement_status: UNANIMOUS
      severity: BLOCKER
      category: SCOPE_INCOMPLETENESS
      description: |
        PRD Workstream H (ViewCommitment + ContextPack binding) is MISSING from RFC.
        PRD defines tickets TCK-00325 and TCK-00326 that are not in RFC.
      prd_reference: "AUTONOMOUS_FORGE_ADMISSION_CYCLE.md lines 587-626"
      remediation: |
        Add requirement REQ-0008 for ViewCommitment + ContextPack binding.
        Add tickets TCK-00325 and TCK-00326 to 06_ticket_decomposition.yaml.

    - finding_id: FND-SA1-CYCLE1-002
      source_agent: SA-1
      source_cycle: 1
      source_mode: 62
      agreement_status: UNANIMOUS
      severity: BLOCKER
      category: SCOPE_INCOMPLETENESS
      description: |
        PRD Workstream I (Agent Adapter Profiles) is COMPLETELY MISSING from RFC.
        PRD explicitly states: "[IMPORTANT SECTION] -- ADAPTERS HAVE NOT YET BEEN ADDRESSED
        IN THE ABOVE RFC BUT **MUST** BE INCLUDED IN THE PLAN FOR A FULLY AUTONOMOUS
        FORGE ADMISSION CYCLE."
      prd_reference: "AUTONOMOUS_FORGE_ADMISSION_CYCLE.md lines 789-854"
      remediation: |
        Add requirement REQ-0009 for Agent Adapter Profiles.
        Add tickets TCK-00327 through TCK-00330 for adapter implementation.
        Add design decisions for adapter architecture and tool bridging strategy.

    - finding_id: FND-SA2-CYCLE1-001
      source_agent: SA-2
      source_cycle: 1
      source_mode: 40
      agreement_status: UNANIMOUS
      severity: BLOCKER
      category: IMPLEMENTATION_GAP
      description: |
        PermeabilityReceiptV1 artifact type is not implemented.
        PRD defines this as NORMATIVE but no Rust implementation exists.
      evidence: "grep shows only 2 files mention it (PRD and unified-theory.md)"
      remediation: |
        Implement PermeabilityReceiptV1 struct with CAS serialization.
        Add to artifact types registry.
        Wire into SpawnEpisode authority validation.

    - finding_id: FND-SA3-CYCLE1-002
      source_agent: SA-3
      source_cycle: 1
      source_mode: 49
      agreement_status: UNANIMOUS
      severity: BLOCKER
      category: EVIDENCE_GAP
      description: |
        ToolExecutionReceipt framework exists (evidence/receipt.rs) but is NOT used by
        ToolExecutor or FAC runtime. Tool execution occurs without proof-carrying evidence.
      evidence: "executor.rs does not emit receipts despite result_hash computation"
      remediation: |
        Wire ToolExecutionReceipt emission in ToolExecutor.
        Aggregate into ToolLogIndexV1 per episode.
        Bind tool_log_index_hash in ReviewArtifactBundle.

  major:
    - finding_id: FND-SA3-CYCLE1-003
      source_agent: SA-3
      source_cycle: 1
      source_mode: 79
      agreement_status: MAJORITY
      severity: MAJOR
      category: SECURITY_GAP
      description: |
        Legacy allow path still exists in session_dispatch.rs.
        RSK-0001 acknowledges this but marks it MEDIUM likelihood when it should be HIGH.
      evidence: "session_dispatch.rs:967-997 shows fallback allow when broker absent"
      remediation: |
        Remove or explicitly gate legacy allow path.
        Add integration test proving tool denied when broker absent.

    - finding_id: FND-SA3-CYCLE1-004
      source_agent: SA-3
      source_cycle: 1
      source_mode: 18
      agreement_status: MAJORITY
      severity: MAJOR
      category: SECURITY_GAP
      description: |
        TOCTOU race in symlink validation (RSK-0005) is marked "ACCEPTED for v0" but
        underestimates risk - attacker controls patch content which IS applied to filesystem.
      evidence: "workspace.rs apply path does not use openat2/RESOLVE_BENEATH"
      remediation: |
        Upgrade RSK-0005 to MAJOR severity.
        Implement RESOLVE_BENEATH or mount namespace isolation.

    - finding_id: FND-SA2-CYCLE1-002
      source_agent: SA-2
      source_cycle: 1
      source_mode: 33
      agreement_status: MAJORITY
      severity: MAJOR
      category: ASSUMPTION_VULNERABILITY
      description: |
        TCK-00290 session viability completion status unclear.
        Code shows legacy manifest fallback path still present.
      evidence: "dispatch.rs:2917-2920 uses InMemoryManifestStore not CAS-backed"
      remediation: |
        Verify TCK-00290 completion status.
        Gate legacy path by feature flag or compile-time constant.

  minor:
    - finding_id: FND-SA1-CYCLE1-003
      source_agent: SA-1
      source_cycle: 1
      source_mode: 70
      agreement_status: UNANIMOUS
      severity: MINOR
      category: CONSISTENCY
      description: |
        Ticket numbering gap: PRD defines TCK-00325 and TCK-00326 but RFC ends at TCK-00324.
      remediation: "Extend 06_ticket_decomposition.yaml to maintain ticket registry consistency"

knowledge_gaps:
  - gap_id: KG-001
    description: "ToolLogIndexV1 artifact type does not exist in codebase"
    exploration_needed: "Verify if this is new artifact to create or naming differs"

  - gap_id: KG-002
    description: "Stop-order gating implementation status unknown"
    exploration_needed: "Trace StopConditions usage before tool execution"

  - gap_id: KG-003
    description: "Projection worker integration points undocumented"
    exploration_needed: "Identify daemon main.rs integration point for projection task"

open_questions:
  - question: "Should Workstream I (Agent Adapters) be in RFC-0019 or a new RFC-0020?"
    recommendation: "Include in RFC-0019 to maintain PRD binding; PRD states MUST be included"

  - question: "Should TCK-00325/326 (Workstream H) be added to existing RFC or treated as amendment?"
    recommendation: "Add to existing RFC since it's already mentioned in PRD ticket decomposition"

transcendental_analysis:
  requirement: "Automated FAC v0 where PR → episode → receipt → projection"
  preconditions_derived:
    - precondition: "SessionDispatcher must have CAS/ledger/broker/clock"
      status: MISSING
      reference: "state.rs:349-352"
    - precondition: "Capability manifests must be real, not empty stubs"
      status: MISSING
      reference: "dispatch.rs:2911-2920"
    - precondition: "Workspace apply must be functional"
      status: MISSING
      reference: "workspace.rs:691-766"
    - precondition: "Tool results must propagate hashes to receipts"
      status: MISSING
      reference: "executor.rs:481-512"
    - precondition: "Episode events must stream to ledger"
      status: MISSING
      reference: "runtime.rs:1162-1209"
    - precondition: "Projection worker must be wired"
      status: MISSING
      reference: "projection/mod.rs:3-12"
    - precondition: "Agent adapter profiles must exist"
      status: MISSING
      reference: "PRD Workstream I"

verdict: NEEDS_REMEDIATION
verdict_reason: |
  RFC-0019 v0 fails GATE-TCK-SCOPE-COVERAGE with 4 BLOCKER findings:
  1. Workstream H (ViewCommitment + ContextPack) missing
  2. Workstream I (Agent Adapter Profiles) missing - PRD marks as mandatory
  3. PermeabilityReceiptV1 not implemented
  4. ToolExecutionReceipt not wired to runtime

  The RFC captures Workstreams A-G but is incomplete against PRD requirements.
  v0 Discovery phase identified critical gaps requiring RFC amendment before
  advancing to v2 (Exploration) phase.

remediation_path:
  immediate:
    - "Add REQ-0008 (ViewCommitment binding) and REQ-0009 (Agent Adapters) to RFC"
    - "Add TCK-00325 through TCK-00330 to 06_ticket_decomposition.yaml"
    - "Add DEC-0008 (ViewCommitment binding), DEC-0009 (adapter architecture) to RFC"
    - "Add TB-006 (PermeabilityReceipt trust boundary) to 03_trust_boundaries.yaml"

  before_v2_exploration:
    - "Implement PermeabilityReceiptV1 artifact schema (can be discovered during exploration)"
    - "Implement ToolLogIndexV1 artifact schema"
    - "Wire ToolExecutionReceipt in ToolExecutor"

  security_hardening:
    - "Gate legacy allow path in session_dispatch.rs"
    - "Upgrade RSK-0005 to MAJOR and add RESOLVE_BENEATH requirement"
